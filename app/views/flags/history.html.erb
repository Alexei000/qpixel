<h1>Flag History</h1>
<p>
  Below is a list of all the flags you have cast and the outcome of each of them. Moderators handling your flags may also
  have left you feedback.
</p>

<h3>
  <%= pluralize(@flags.count, 'flag') %>
</h3>
<h4><%= @statuses.map { |s, c| "#{c} #{s.present? ? s : 'pending'}" }.join(', ') %></h4>

<% @flags.each do |flag| %>
  <div class="widget">
    <div class="item-list">
      <%= render 'posts/list', post: flag.post %>
    </div>
    <div class="widget--body">
      <p><strong>Your comment:</strong> <%= flag.reason %> &mdash; <a href="/users/<%= flag.user.id %>"><%= flag.user.username %></a></p>
    </div>
    <div class="widget--body">
      <% status_colors = { helpful: 'green', declined: 'red', pending: 'primary' } %>
      <span class="badge is-tag is-filled is-<%= status_colors[(flag.status || 'pending').to_sym] %>">
        <%= flag.status || 'pending' %>
      </span>
      <em>
        <% if flag.message.present? %>
          &mdash; <%= flag.message %>
        <% end %>
      </em>
    </div>
  </div>
<% end %>

<%= will_paginate @flags, renderer: BootstrapPagination::Rails %>