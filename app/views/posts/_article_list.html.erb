<% active_user = post.last_activity_by || post.user %>
<div class="item-list--item <%= post.deleted ? 'deleted-content' : '' %>">
  <div class="item-list--number-value">
    <span class="item-list--number">
      <span class=" js-upvote-count">+<%= post.upvote_count %></span>
    </span>
    <span class="item-list--number">
      <span class=" js-downvote-count">&minus;<%= post.downvote_count %></span>
    </span>
  </div>
  <div class="item-list--text-value is-primary">
    <div class="post-list--title">
      <%= link_to post.title, share_article_path(post) %>
    </div>
    <p class="has-color-tertiary-600 has-float-right post-list--meta">
      last activity <%= time_ago_in_words(post.last_activity) %> ago by <%= link_to active_user.username, user_path(active_user) %>
    </p>
    <div class="has-padding-top-2">
      <% category = defined?(@category) ? @category : post.category %>
      <% if category.display_post_types.reject { |e| e.to_s.empty? }.size > 1 %>
        <%= post_type_badge(post.post_type.name) %>
      <% end %>
      <% tag_set = post.tag_set %>
      <% required_ids = category&.required_tag_ids %>
      <% topic_ids = category&.topic_tag_ids %>
      <% category_sort_tags(post.tags, required_ids, topic_ids).each do |tag| %>
        <% required = required_ids&.include? tag.id %>
        <% topic = topic_ids&.include? tag.id %>
        <%= link_to tag.name, questions_tagged_path(tag_set: tag_set.id, tag: tag.name),
                    class: "badge is-tag #{required ? 'is-filled' : ''} #{topic ? 'is-outlined' : ''}" %>
      <% end %>
    </div>
  </div>
</div>
